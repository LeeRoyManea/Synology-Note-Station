# copied/inspired from https://github.com/flathub/com.synology.SynologyDrive/blob/master/com.synology.SynologyDrive.yaml
id: com.synology.synology-note-station
runtime: org.freedesktop.Platform
runtime-version: "23.08"
sdk: org.freedesktop.Sdk
command: launch.sh
finish-args:
  - --share=network
  - --socket=x11
  - --share=ipc
  - --persist=.syno_ns_app
  - --persist=.note_data
  - --persist=.syno_ns_backup
modules:
  - name: com.synology.synology-note-station
    buildsystem: simple
    sources:
      - type: file
        path: launch.sh
      - type: file
        path: com.synology.synology-note-station.metainfo.xml
      - type: file
        path: com.synology.synology-note-station.desktop
      - type: file
        path: icons/com.synology.synology-note-station-64.png
      - type: file
        path: icons/com.synology.synology-note-station-128.png
      - type: file
        path: icons/com.synology.synology-note-station-256.png
      - type: extra-data
        filename: synology-note-station.deb
        only-arches: [ x86_64 ]
        url: "https://global.synologydownload.com/download/Utility/NoteStationClient/2.2.4-703/Ubuntu/x86_64/synology-note-station-client-2.2.4-703-linux-x64.deb"
        sha256: a4c763bddda21bd211b0c8afdcff7e72a3edddc2392470fec8ce8123a0531751
        size: 108574130
      - type: script
        dest-filename: apply_extra_data
        commands:
          - ar x synology-note-station.deb
          - tar -xf data.tar.xz
          - mv data/opt /opt
          - mv data/usr /usr
    build-commands:
      - install -D launch.sh /app/bin/launch.sh
      - install -Dm644 com.synology.synology-note-station.desktop -t /app/share/applications
      - install -Dm644 com.synology.synology-note-station.metainfo.xml -t /app/share/metainfo
      - install -Dm644 com.synology.synology-note-station-64.png /app/share/icons/hicolor/64x64/apps/com.synology.synology-note-station.png
      - install -Dm644 com.synology.synology-note-station-128.png /app/share/icons/hicolor/128x128/apps/com.synology.synology-note-station.png
      - install -Dm644 com.synology.synology-note-station-256.png /app/share/icons/hicolor/256x256/apps/com.synology.synology-note-station.png
      - install -D apply_extra_data -t /app